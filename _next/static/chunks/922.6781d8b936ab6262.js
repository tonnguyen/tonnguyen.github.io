"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{8922:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(5155),a=n(1348),i=n(2115),s=n(6576),o=n(6003),c=n(3569),l=n.n(c);function u(){return(0,r.jsxs)("div",{className:l().loadingPlaceholder,children:[(0,r.jsx)("div",{className:l().spinner,children:(0,r.jsx)("div",{className:l().spinnerInner})}),(0,r.jsx)("p",{children:"Loading 3D Character..."})]})}let f=function(e){let{children:t}=e,[n,c]=(0,i.useState)(0),[l,f]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=e=>{e.preventDefault(),f(!0),setTimeout(()=>{c(e=>e+1),f(!1)},100)},t=document.querySelector("canvas");return t&&t.addEventListener("webglcontextlost",e,!1),()=>{t&&t.removeEventListener("webglcontextlost",e)}},[]),l)?(0,r.jsx)(u,{}):(0,r.jsx)(a.Hl,{camera:{position:[1.6,1.3,2.8],fov:60},style:{background:"transparent"},gl:{antialias:!0,alpha:!0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1},onCreated:e=>{let{gl:t}=e;t.setClearColor(0,0),t.shadowMap.enabled=!0,t.shadowMap.type=o.PCFSoftShadowMap},children:(0,r.jsxs)(i.Suspense,{fallback:null,children:[(0,r.jsx)("ambientLight",{intensity:.4,color:"#ffffff"}),(0,r.jsx)("directionalLight",{position:[5,5,5],intensity:.8,color:"#ffffff",castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),(0,r.jsx)("directionalLight",{position:[-5,3,-5],intensity:.3,color:"#ffffff"}),(0,r.jsx)("pointLight",{position:[0,4,2],intensity:.5,color:"#ffffff",distance:10}),t,(0,r.jsx)(s.OH$,{preset:"apartment"}),(0,r.jsx)(s.NUf,{enableZoom:!0,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/6,maxDistance:8,minDistance:1.1,target:[0,.9,.4]})]})},n)};function m(){return(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:(0,r.jsx)("img",{src:"/Ton.webp",alt:"Ton Nguyen profile",style:{maxWidth:"60%",maxHeight:"60%",borderRadius:"50%",boxShadow:"0 4px 32px rgba(0,0,0,0.15)"}})})}function d(e){let{isHovered:t}=e,n=(0,i.useRef)(),c=(0,i.useRef)(),l=(0,i.useRef)(),u=(0,i.useRef)({}),f=(0,i.useRef)(),[d,h]=(0,i.useState)([]),[p,g]=(0,i.useState)(!1),[x,j]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),y=(0,i.useRef)(),C=(0,s.p4g)("/models/Adjustable Desk.glb"),L=(0,s.p4g)("/models/Beach Character.glb"),w=(0,s.p4g)("/models/Laptop.glb"),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=u.current,r=n[e];r&&(Object.keys(n).forEach(e=>{n[e]!==r&&n[e].stop()}),f.current&&f.current!==r&&f.current.fadeOut(t),r.reset().fadeIn(t).play(),f.current=r)},M=()=>{let e=["CharacterArmature|Idle_Neutral","CharacterArmature|Idle","CharacterArmature|Idle_Gun","CharacterArmature|Interact"],t=d.filter(t=>e.includes(t.name));if(t.length>0){let e=Math.floor(Math.random()*t.length);E(t[e].name)}};if(!C.scene||!L.scene||!w.scene)return(0,r.jsx)(m,{});(0,i.useEffect)(()=>{L.animations&&L.animations.length>0&&h(L.animations.map((e,t)=>({name:e.name||"Animation_".concat(t),clip:e,index:t})))},[L]);let S=C.scene;S.position.set(0,0,.8),S.scale.setScalar(1),S.rotation.y=Math.PI/2;let A=L.scene,k=new o.Box3().setFromObject(A);k&&k.min&&"number"==typeof k.min.y&&(A.position.y=-k.min.y-.05),A.position.x=0,A.position.z=0,A.scale.setScalar(1),c.current=A;let I=w.scene;return I.position.set(0,.943,.6),I.scale.setScalar(.04),I.rotation.y=Math.PI,(0,i.useEffect)(()=>{if(c.current&&L.animations&&L.animations.length>0){l.current=new o.AnimationMixer(c.current),L.animations.forEach(e=>{let t=l.current.clipAction(e);u.current[e.name]=t,t.setLoop(o.LoopOnce,1),t.clampWhenFinished=!0,"CharacterArmature|Walk"===e.name&&(t.setLoop(o.LoopRepeat,1/0),t.clampWhenFinished=!1)});let e=L.animations.find(e=>"CharacterArmature|Wave"===e.name);if(e){g(!0);let t=u.current[e.name];t.setLoop(o.LoopOnce,1),t.clampWhenFinished=!0,E(e.name),t.getMixer().addEventListener("finished",function e(n){if(n.action===t){g(!1);let n=L.animations.find(e=>"CharacterArmature|Idle_Neutral"===e.name);if(n){E(n.name);let e=u.current[n.name];e.getMixer().addEventListener("finished",function t(n){n.action===e&&(e.getMixer().removeEventListener("finished",t),y.current=setTimeout(()=>{b(!0)},2e3))})}else y.current=setTimeout(()=>{b(!0)},2e3);t.getMixer().removeEventListener("finished",e)}})}else b(!0)}},[L]),(0,i.useEffect)(()=>{if(p||x||!v)return;let e=!1,t=()=>{if(p||x||!v||e)return;M();let n=f.current;if(n){let r=a=>{a.action===n&&(n.getMixer().removeEventListener("finished",r),y.current=setTimeout(()=>{e||p||x||!v||t()},2e3))};n.getMixer().addEventListener("finished",r)}};return t(),()=>{e=!0,clearTimeout(y.current)}},[v,p,x,d]),(0,a.j$)((e,t)=>{let r=e.clock.getElapsedTime();n.current&&(n.current.rotation.y=.1*Math.sin(.2*r)),l.current&&l.current.update(t)}),(0,i.useEffect)(()=>{if(d.length){if(t){let e=d.find(e=>"CharacterArmature|Walk"===e.name);e&&(b(!1),j(!0),clearTimeout(y.current),E(e.name))}else if(x){clearTimeout(y.current),j(!1);let e=f.current;e&&"CharacterArmature|Walk"===e.getClip().name&&(e.stop(),e.reset()),b(!0)}}},[t,d.length]),(0,r.jsxs)("group",{ref:n,children:[(0,r.jsx)("primitive",{object:S}),(0,r.jsx)("primitive",{object:A}),(0,r.jsx)("primitive",{object:I})]})}function h(e){let{isHovered:t}=e;return(0,r.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,r.jsx)(f,{children:(0,r.jsx)(d,{isHovered:t})})})}}}]);